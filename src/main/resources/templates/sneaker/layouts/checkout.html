<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Оформление заказа - SneakerShop</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
  <h2 class="mb-4">Оформление заказа</h2>

  <div class="row">
    <div class="col-md-8">
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title">Информация о заказе</h5>
          <div class="table-responsive">
            <table class="table">
              <thead>
              <tr>
                <th>Товар</th>
                <th>Размер</th>
                <th>Цена</th>
              </tr>
              </thead>
<tbody>
                <tr th:each="sneaker : ${orderSneakers}">
                  <td class="d-flex align-items-center">
                    <img th:if="${sneaker.imageUrl != null}"
                         th:src="@{'/img/' + ${sneaker.imageUrl}}"
                         alt="Product image"
                         style="width: 50px; height: 50px; object-fit: cover; margin-right: 10px;" />
                    <span th:text="${sneaker.name + ' (' + sneaker.brand + ')'}">Название</span>
                  </td>
                  <td th:text="${sneaker.size}">Размер</td>
                  <td>
                    <span th:text="${#numbers.formatDecimal(sneaker.price, 1, 2) + ' ₽'}">Цена</span>
                    <span class="text-muted">x</span>
                    <span th:text="${sneaker.quantity}">Количество</span>
                  </td>
                </tr>
              </tbody>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="text-end">
<div class="text-end">
              <h5>Итого к оплате: <span th:text="${#numbers.formatDecimal(totalPrice, 1, 2) + ' ₽'}">0 ₽</span></h5>
            </div>
        </div>
      </div>
<form th:action="@{/checkout/process}" method="post" class="card">
    <input type="hidden" name="cartId" th:value="${cart.id}" />
    <div class="card-body">
        <h5 class="card-title">Платежная информация</h5>
        <div class="mb-3">
            <label for="cardNumber" class="form-label">Номер карты</label>
            <input type="text" class="form-control" id="cardNumber"
                   pattern="\d{16}" placeholder="1234 5678 9012 3456" required>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="expiry" class="form-label">Срок действия</label>
                <input type="text" class="form-control" id="expiry"
                       pattern="\d{2}/\d{2}" placeholder="MM/YY" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="cvv" class="form-label">CVV</label>
                <input type="text" class="form-control" id="cvv"
                       pattern="\d{3}" placeholder="123" required>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Оплатить</button>
    </div>
</form>
    </div>

    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Сводка заказа</h5>
            <p class="card-text">
                Количество товаров: <span th:text="${#lists.size(orderSneakers)}">0</span><br>
                Общая сумма: <span th:text="${#numbers.formatDecimal(cart.totalPrice, 1, 2)} + ' ₽'">0 ₽</span>
            </p>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>